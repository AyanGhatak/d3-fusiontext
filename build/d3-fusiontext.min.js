(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})})(this,function(t){"use strict";function e(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Q&&e.documentElement.namespaceURI===Q?e.createElement(t):e.createElementNS(n,t)}}function n(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function i(t,e,n){return t=r(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function r(t,e,n){return function(i){var r=at;at=i;try{t.call(this,this.__data__,e,n)}finally{at=r}}}function o(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function s(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;o>i;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function a(t,e,n){var o=st.hasOwnProperty(t.type)?i:r;return function(i,r,s){var a,h=this.__on,l=o(e,r,s);if(h)for(var u=0,c=h.length;c>u;++u)if((a=h[u]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=l,a.capture=n),void(a.value=e);this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,capture:n},h?h.push(a):this.__on=[a]}}function h(){}function l(){return[]}function u(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function c(t,e,n,i,r,o){for(var s,a=0,h=e.length,l=o.length;l>a;++a)(s=e[a])?(s.__data__=o[a],i[a]=s):n[a]=new u(t,o[a]);for(;h>a;++a)(s=e[a])&&(r[a]=s)}function f(t,e,n,i,r,o,s){var a,h,l,c={},f=e.length,p=o.length,g=new Array(f);for(a=0;f>a;++a)(h=e[a])&&(g[a]=l=vt+s.call(h,h.__data__,a,e),l in c?r[a]=h:c[l]=h);for(a=0;p>a;++a)l=vt+s.call(t,o[a],a,o),(h=c[l])?(i[a]=h,h.__data__=o[a],c[l]=null):n[a]=new u(t,o[a]);for(a=0;f>a;++a)(h=e[a])&&c[g[a]]===h&&(r[a]=h)}function p(t,e){return e>t?-1:t>e?1:t>=e?0:0/0}function g(t){return function(){this.removeAttribute(t)}}function d(t){return function(){this.removeAttributeNS(t.space,t.local)}}function m(t,e){return function(){this.setAttribute(t,e)}}function y(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function v(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function w(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function _(t){return function(){this.style.removeProperty(t)}}function x(t,e,n){return function(){this.style.setProperty(t,e,n)}}function b(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function S(t){return function(){delete this[t]}}function T(t,e){return function(){this[t]=e}}function C(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function N(t){return t.trim().split(/^|\s+/)}function A(t){return t.classList||new L(t)}function L(t){this._node=t,this._names=N(t.getAttribute("class")||"")}function H(t,e){for(var n=A(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function W(t,e){for(var n=A(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function E(t){return function(){H(this,t)}}function M(t){return function(){W(this,t)}}function R(t,e){return function(){(e.apply(this,arguments)?H:W)(this,t)}}function B(){this.textContent=""}function j(t){return function(){this.textContent=t}}function O(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function z(){this.innerHTML=""}function I(t){return function(){this.innerHTML=t}}function D(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function F(){this.nextSibling&&this.parentNode.appendChild(this)}function k(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function P(){return null}function V(){var t=this.parentNode;t&&t.removeChild(this)}function q(t,e,n){var i=Et(t),r=i.CustomEvent;r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function K(t,e){return function(){return q(this,t,e)}}function $(t,e){return function(){return q(this,t,e.apply(this,arguments))}}function U(t,e){this._groups=t,this._parents=e}function G(){return new U([[document.documentElement]],qt)}function Z(t){return t&&t.__esModule?t["default"]:t}function X(t,e){return e={exports:{}},t(e,e.exports),e.exports}function J(){this.config=te(),this.graphics={},this.measurement={}}var Q="http://www.w3.org/1999/xhtml",Y={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Y.hasOwnProperty(e)?{space:Y[e],local:t}:t},et=function(t){var i=tt(t);return(i.local?n:e)(i)},nt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var it=document.documentElement;if(!it.matches){var rt=it.webkitMatchesSelector||it.msMatchesSelector||it.mozMatchesSelector||it.oMatchesSelector;nt=function(t){return function(){return rt.call(this,t)}}}}var ot=nt,st={},at=null;if("undefined"!=typeof document){var ht=document.documentElement;"onmouseenter"in ht||(st={mouseenter:"mouseover",mouseleave:"mouseout"})}var lt=function(t,e,n){var i,r,h=o(t+""),l=h.length;{if(!(arguments.length<2)){for(u=e?a:s,null==n&&(n=!1),i=0;l>i;++i)this.each(u(h[i],e,n));return this}var u=this.node().__on;if(u)for(var c,f=0,p=u.length;p>f;++f)for(i=0,c=u[f];l>i;++i)if((r=h[i]).type===c.type&&r.name===c.name)return c.value}},ut=function(t){return null==t?h:function(){return this.querySelector(t)}},ct=function(t){"function"!=typeof t&&(t=ut(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;n>r;++r)for(var o,s,a=e[r],h=a.length,l=i[r]=new Array(h),u=0;h>u;++u)(o=a[u])&&(s=t.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),l[u]=s);return new U(i,this._parents)},ft=function(t){return null==t?l:function(){return this.querySelectorAll(t)}},pt=function(t){"function"!=typeof t&&(t=ft(t));for(var e=this._groups,n=e.length,i=[],r=[],o=0;n>o;++o)for(var s,a=e[o],h=a.length,l=0;h>l;++l)(s=a[l])&&(i.push(t.call(s,s.__data__,l,a)),r.push(s));return new U(i,r)},gt=function(t){"function"!=typeof t&&(t=ot(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;n>r;++r)for(var o,s=e[r],a=s.length,h=i[r]=[],l=0;a>l;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&h.push(o);return new U(i,this._parents)},dt=function(t){return new Array(t.length)},mt=function(){return new U(this._enter||this._groups.map(dt),this._parents)};u.prototype={constructor:u,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var yt=function(t){return function(){return t}},vt="$",wt=function(t,e){if(!t)return d=new Array(this.size()),l=-1,this.each(function(t){d[++l]=t}),d;var n=e?f:c,i=this._parents,r=this._groups;"function"!=typeof t&&(t=yt(t));for(var o=r.length,s=new Array(o),a=new Array(o),h=new Array(o),l=0;o>l;++l){var u=i[l],p=r[l],g=p.length,d=t.call(u,u&&u.__data__,l,i),m=d.length,y=a[l]=new Array(m),v=s[l]=new Array(m),w=h[l]=new Array(g);n(u,p,y,v,w,d,e);for(var _,x,b=0,S=0;m>b;++b)if(_=y[b]){for(b>=S&&(S=b+1);!(x=v[S])&&++S<m;);_._next=x||null}}return s=new U(s,i),s._enter=a,s._exit=h,s},_t=function(){return new U(this._exit||this._groups.map(dt),this._parents)},xt=function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;o>a;++a)for(var h,l=e[a],u=n[a],c=l.length,f=s[a]=new Array(c),p=0;c>p;++p)(h=l[p]||u[p])&&(f[p]=h);for(;i>a;++a)s[a]=e[a];return new U(s,this._parents)},bt=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this},St=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=p);for(var n=this._groups,i=n.length,r=new Array(i),o=0;i>o;++o){for(var s,a=n[o],h=a.length,l=r[o]=new Array(h),u=0;h>u;++u)(s=a[u])&&(l[u]=s);l.sort(e)}return new U(r,this._parents).order()},Tt=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},Ct=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},Nt=function(){for(var t=this._groups,e=0,n=t.length;n>e;++e)for(var i=t[e],r=0,o=i.length;o>r;++r){var s=i[r];if(s)return s}return null},At=function(){var t=0;return this.each(function(){++t}),t},Lt=function(){return!this.node()},Ht=function(t){for(var e=this._groups,n=0,i=e.length;i>n;++n)for(var r,o=e[n],s=0,a=o.length;a>s;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this},Wt=function(t,e){var n=tt(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?d:g:"function"==typeof e?n.local?w:v:n.local?y:m)(n,e))},Et=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},Mt=function(t,e,n){var i;return arguments.length>1?this.each((null==e?_:"function"==typeof e?b:x)(t,e,null==n?"":n)):Et(i=this.node()).getComputedStyle(i,null).getPropertyValue(t)},Rt=function(t,e){return arguments.length>1?this.each((null==e?S:"function"==typeof e?C:T)(t,e)):this.node()[t]};L.prototype={add:function(t){var e=this._names.indexOf(t);0>e&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Bt=function(t,e){var n=N(t+"");if(arguments.length<2){for(var i=A(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?R:e?E:M)(n,e))},jt=function(t){return arguments.length?this.each(null==t?B:("function"==typeof t?O:j)(t)):this.node().textContent},Ot=function(t){return arguments.length?this.each(null==t?z:("function"==typeof t?D:I)(t)):this.node().innerHTML},zt=function(){return this.each(F)},It=function(){return this.each(k)},Dt=function(t){var e="function"==typeof t?t:et(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},Ft=function(t,e){var n="function"==typeof t?t:et(t),i=null==e?P:"function"==typeof e?e:ut(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},kt=function(){return this.each(V)},Pt=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Vt=function(t,e){return this.each(("function"==typeof e?$:K)(t,e))},qt=[null];U.prototype=G.prototype={constructor:U,select:ct,selectAll:pt,filter:gt,data:wt,enter:mt,exit:_t,merge:xt,order:bt,sort:St,call:Tt,nodes:Ct,node:Nt,size:At,empty:Lt,each:Ht,attr:Wt,style:Mt,property:Rt,classed:Bt,text:jt,html:Ot,raise:zt,lower:It,append:Dt,insert:Ft,remove:kt,datum:Pt,on:lt,dispatch:Vt};var Kt,$t,Ut=function(t){return"string"==typeof t?new U([[document.querySelector(t)]],[document.documentElement]):new U([[t]],qt)},Gt=X(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={init:function(t){var e=t.document,i=t.navigator,r=i.userAgent,o="DIV",s=Math.ceil,a=Math.floor,h=0,l="fusioncharts-smartlabel-",u=l+"container",c=l+"tag",f=l+"br";return n={win:t,containerClass:u,classNameWithTag:c,classNameWithTagBR:f,maxDefaultCacheLimit:500,classNameReg:new RegExp("\b"+c+"\b"),classNameBrReg:new RegExp("\b"+f+"\b"),spanAdditionRegx:/(<[^<\>]+?\>)|(&(?:[a-z]+|#[0-9]+);|.)/gi,spanAdditionReplacer:'$1<span class="'+c+'">$2</span>',spanRemovalRegx:new RegExp("\\<span[^\\>]+?"+c+"[^\\>]{0,}\\>(.*?)\\<\\/span\\>","ig"),xmlTagRegEx:new RegExp("<[^>][^<]*[^>]+>","i"),ltgtRegex:/&lt;|&gt;/g,brReplaceRegex:/<br\/>/gi,testStrAvg:"WgI",parentContainerStyle:{position:"absolute",top:"-9999em",whiteSpace:"nowrap",padding:"0px",width:"1px",height:"1px",overflow:"hidden"},supportedStyle:{font:"font",fontFamily:"font-family","font-family":"font-family",fontWeight:"font-weight","font-weight":"font-weight",fontSize:"font-size","font-size":"font-size",lineHeight:"line-height","line-height":"line-height",fontStyle:"font-style","font-style":"font-style"},getDocumentSupport:function(){var n,i,o;return e.getElementsByClassName?(n="getElementsByClassName",i=c,o=!0):(n="getElementsByTagName",i="span",o=!1),{isIE:/msie/i.test(r)&&!t.opera,hasSVG:Boolean(t.SVGAngle||e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),isHeadLess:new RegExp(" HtmlUnit").test(r),isWebKit:new RegExp(" AppleWebKit/").test(r),childRetriverFn:n,childRetriverString:i,noClassTesting:o}},createContainer:function(t){var n,i;if(t&&(t.offsetWidth||t.offsetHeight)){if(t.appendChild)return t.appendChild(i=e.createElement(o)),i.className=u,i.setAttribute("aria-hidden","true"),i.setAttribute("role","presentation"),i}else if(n=e.getElementsByTagName("body")[0],n&&n.appendChild)return i=e.createElement(o),i.className=u,i.setAttribute("aria-hidden","true"),i.setAttribute("role","presentation"),h+=1,n.appendChild(i),i},getNearestBreakIndex:function(t,e,n){if(!t||!t.length)return 0;var i,r=n._getWidthFn(),o=0,h=0,l=r(t),u=l/t.length;if(i=e,o=s(e/u),e>l)return t.length-1;for(o>t.length&&(i=e-l,o=t.length);i>0;){if(i=e-r(t.substr(0,o)),h=a(i/u),!h)return o;o+=h}for(;0>i;){if(i=e-r(t.substr(0,o)),h=a(i/u),!h)return o;o+=h}return o},setLineHeight:function(t){var e=t.fontSize=t.fontSize||"12px";return t.lineHeight=t.lineHeight||t["line-height"]||1.2*parseInt(e,10)+"px",t}}}};e["default"]=n,t.exports=e["default"]}),Zt=X(function(t){function e(t){return t&&t.__esModule?t:{"default":t}}function n(t,e,n){var i;n=n>5?n:5,n=20>n?n:20,this.maxContainers=n,this.first=null,this.last=null,this.containers={},this.length=0,this.rootNode=t,e&&(i=s.createElementNS("http://www.w3.org/2000/svg","svg"),i.setAttributeNS("http://www.w3.org/2000/svg","xlink","http://www.w3.org/1999/xlink"),i.setAttributeNS("http://www.w3.org/2000/svg","height","0"),i.setAttributeNS("http://www.w3.org/2000/svg","width","0"),this.svgRoot=i,this.rootNode.appendChild(i))}var i=Gt,r=e(i),o=r["default"].init("undefined"!=typeof window?window:void 0),s=o.win.document,a=o.getDocumentSupport(),h=a.isWebKit?0:4.5;n.prototype.get=function(t){var e,n,i,r=this.containers,s=this.length,a=this.maxContainers,h="";for(n in o.supportedStyle)void 0!==t[n]&&(h+=o.supportedStyle[n]+":"+t[n]+";");if(!h)return!1;if(i=r[h])this.first!==i&&(i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),i.next=this.first,i.next.prev=i,this.last===i&&(this.last=i.prev),i.prev=null,this.first=i);else{if(s>=a)for(e=s-a+1;e--;)this.removeContainer(this.last);i=this.addContainer(h)}return i},n.prototype.addContainer=function(t){var e,n;return this.containers[t]=n={next:null,prev:null,node:null,ellipsesWidth:0,lineHeight:0,dotWidth:0,avgCharWidth:4,keyStr:t,charCache:{}},n.next=this.first,n.next&&(n.next.prev=n),this.first=n,this.last||(this.last=n),this.length+=1,e=n.node=s.createElement("div"),this.rootNode.appendChild(e),a.isIE&&!a.hasSVG?e.style.setAttribute("cssText",t):e.setAttribute("style",t),e.setAttribute("aria-hidden","true"),e.setAttribute("role","presentation"),e.style.display="inline-block",e.innerHTML=o.testStrAvg,n.lineHeight=e.offsetHeight,n.avgCharWidth=e.offsetWidth/3,a.isBrowserLess?(e=n.svgText=s.createElementNS("http://www.w3.org/2000/svg","text"),e.setAttribute("style",t),this.svgRoot.appendChild(e),e.textContent=o.testStrAvg,n.lineHeight=e.getBBox().height,n.avgCharWidth=(e.getBBox().width-h)/3,e.textContent="...",n.ellipsesWidth=e.getBBox().width-h,e.textContent=".",n.dotWidth=e.getBBox().width-h):(e.innerHTML="...",n.ellipsesWidth=e.offsetWidth,e.innerHTML=".",n.dotWidth=e.offsetWidth,e.innerHTML=""),n},n.prototype.removeContainer=function(t){var e=t.keyStr;e&&this.length&&t&&(this.length-=1,t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev),t.node.parentNode.removeChild(t.node),delete this.containers[e])},n.prototype.dispose=function(){var t,e=this.containers;this.maxContainers=null;for(t in e)this.removeContainer(e[t]);this.rootNode.parentNode.removeChild(this.rootNode),this.rootNode=null,this.first=null,this.last=null},t.exports=n}),Xt=X(function(t,e){function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n,r){var o,s,u,c,f=!1,p=i.store;if("undefined"!=typeof t&&"object"!=typeof t){(c=p[t])&&c.dispose(),p[t]=this,r=r||{},r.maxCacheLimit=isFinite(u=r.maxCacheLimit)?u:h.maxDefaultCacheLimit,"string"==typeof e&&(e=l.getElementById(e)),o=h.createContainer(e),o.innerHTML=h.testStrAvg,(d.isHeadLess||!d.isIE&&!o.offsetHeight&&!o.offsetWidth)&&(f=!0),o.innerHTML="";for(s in h.parentContainerStyle)o.style[s]=h.parentContainerStyle[s];this.id=t,this.parentContainer=o,this._containerManager=new a["default"](o,f,10),this._showNoEllipses=!n,this._init=!0,this.style={},this.options=r,this.setStyle()}}Object.defineProperty(e,"__esModule",{value:!0});var r=Gt,o=n(r),s=Zt,a=n(s),h=o["default"].init("undefined"!=typeof window?window:void 0),l=h.win.document,u=h.win.Math,c=u.max,f=u.round,p="",g={" ":"&nbsp;"},d=h.getDocumentSupport(),m=d.isWebKit?0:4.5;i.textToLines=function(t){return t=t||{},t.text?"string"!=typeof t.text&&(t.text=t.text.toString()):t.text="",t.lines=t.text.split(/\n|<br\s*?\/?>/gi),t},i.store={},i.prototype._calCharDimWithCache=function(t,e,n){if(!this._init)return!1;var i,r,o,s,a,h,l=this.options.maxCacheLimit,u=this._container,c=this.style||{},f=this._advancedCache||(this._advancedCache={}),d=this._advancedCacheKey||(this._advancedCacheKey=[]),m=t+(c.fontSize||p)+(c.fontFamily||p)+(c.fontWeight||p)+(c.fontStyle||p),y=t+"init"+(c.fontSize||p)+(c.fontFamily||p)+(c.fontWeight||p)+(c.fontStyle||p);return g[t]&&(t=g[t]),e?void 0===(h=f[y])&&(u.innerHTML=t.repeat?t.repeat(n):Array(n+1).join(t),o=u.offsetWidth,u.innerHTML=t,s=u.offsetWidth,h=f[y]=(o-n*s)/(n+1),d.push(y),d.length>l&&delete f[d.shift()]):h=0,(a=f[m])?(r=a.split(","),{width:parseFloat(r[0],10),height:parseFloat(r[1],10)}):(u.innerHTML=t,i={height:u.offsetHeight,width:u.offsetWidth+h},f[m]=i.width+","+i.height,d.push(m),d.length>l&&delete f[d.shift()],i)},i.prototype._getWidthFn=function(){var t=this._containerObj,e=this._container,n=t.svgText;return n?function(t){var e,i;return n.textContent=t,e=n.getBBox(),i=e.width-m,1>i&&(i=e.width),i}:function(t){return e.innerHTML=t,e.offsetWidth}},i.prototype.setStyle=function(t){if(!this._init)return this;var e;if(t!==this.style||this._styleNotSet)return t||(t=this.style),h.setLineHeight(t),this.style=t,this._containerObj=e=this._containerManager.get(t),this._containerObj?(this._container=e.node,this._context=e.context,this._cache=e.charCache,this._lineHeight=e.lineHeight,this._styleNotSet=!1):this._styleNotSet=!0,this},i.prototype.useEllipsesOnOverflow=function(t){return this._init?(this._showNoEllipses=!t,this):this},i.prototype.getSmartText=function(t,e,n,i){if(!this._init)return!1;void 0===t||null===t?t="":"string"!=typeof t&&(t=t.toString());var r,o,s,a,u,f,p,g,m,y,v,w,_,x,b,S,T,C,N,A,L,H,W,E,M,R,B=!1,j=0,O=-1,z=-1,I=-1,D=0,F=0,k=[],P=0,V=this._showNoEllipses?"":"...",q=this._lineHeight,K=this._context,$=this._container,U=this._containerObj,G=U.ellipsesWidth,Z=U.dotWidth,X=[],J=-1,Q=-1,Y=-1,tt=function(t){t=t.replace(/^\s\s*/,"");for(var e=/\s/,n=t.length;e.test(t.charAt(n-=1)););return t.slice(0,n+1)},et={text:t,maxWidth:e,maxHeight:n,width:null,height:null,oriTextWidth:null,oriTextHeight:null,oriText:t,isTruncated:!1};if(w=this._getWidthFn(),n===q&&(n*=1.2),$){if(!d.isBrowserLess){if(B=h.xmlTagRegEx.test(t),B?($.innerHTML=t,et.oriTextWidth=p=$.offsetWidth,et.oriTextHeight=g=$.offsetHeight):(a=t.replace(h.ltgtRegex,function(t){return"&lt;"===t?"<":">"}),b=this.getOriSize(a,!0),et.oriTextWidth=p=b.width,et.oriTextHeight=g=b.height),n>=g&&e>=p)return et.width=et.oriTextWidth=p,et.height=et.oriTextHeight=g,et;if(q>n)return et.text="",et.width=et.oriTextWidth=0,et.height=et.oriTextHeight=0,et}if(t=tt(t).replace(/(\s+)/g," "),u=this._showNoEllipses?e:e-G,!B){if(k=t.split(""),r=k.length,o="",s=[],v=k[0],this._cache[v]?N=this._cache[v].width:(N=w(v),this._cache[v]={width:N}),u>N)s=t.substr(0,h.getNearestBreakIndex(t,u,this)).split(""),P=s.length;else{if(N>e)return et.text="",et.width=et.oriTextWidth=et.height=et.oriTextHeight=0,et;V&&(u=e-2*Z,u>N?V="..":(u=e-Z,u>N?V=".":(u=0,V="")))}if(D=w(s.join("")),F=this._lineHeight,i){for(;r>P;P+=1)if(v=s[P]=k[P],this._cache[v]?N=this._cache[v].width:(b&&(N=b.detailObj[v])||(N=w(v)),this._cache[v]={width:N}),D+=N,D>u&&(o||(o=s.slice(0,-1).join("")),D>e))return et.text=tt(o)+V,et.tooltext=et.oriText,et.width=w(et.text),et.height=this._lineHeight,et;return et.text=s.join(""),et.width=D,et.height=this._lineHeight,et}for(;r>P;P+=1)if(v=s[P]=k[P]," "!==v||K||(v="&nbsp;"),this._cache[v]?N=this._cache[v].width:(b&&(N=b.detailObj[v])||(N=w(v)),this._cache[v]={width:N}),D+=N,D>u&&(o||(o=s.slice(0,-1).join("")),D>e)){if(z=t.substr(0,s.length).lastIndexOf(" "),O=t.substr(0,s.length).lastIndexOf("-"),z>I?(D=w(s.slice(I+1,z).join("")),s.splice(z,1,"<br/>"),I=z,m=z+1):O>I?(O===s.length-1?(D=w(s.slice(I+1,z).join("")),s.splice(O,1,"<br/>-")):(D=w(s.slice(I+1,z).join("")),s.splice(O,1,"-<br/>")),I=O,m=O+1):(s.splice(s.length-1,1,"<br/>"+k[P]),Y=s.length-2,D=w(s.slice(I+1,Y+1).join("")),I=Y,m=P),F+=this._lineHeight,F>n)return et.text=tt(o)+V,et.tooltext=et.oriText,et.width=e,et.height=F-this._lineHeight,et;j=c(j,D),o=null,y=h.getNearestBreakIndex(t.substr(m),u,this),D=w(t.substr(m,y||1)),s.length<m+y&&(s=s.concat(t.substr(s.length,m+y-s.length).split("")),P=s.length-1)}return j=c(j,D),et.text=s.join(""),et.width=j,et.height=F,et}for(f=t.replace(h.spanAdditionRegx,"$2"),t=t.replace(h.spanAdditionRegx,h.spanAdditionReplacer),t=t.replace(/(<br\s*\/*\>)/g,'<span class="'+[h.classNameWithTag," ",h.classNameWithTagBR].join("")+'">$1</span>'),$.innerHTML=t,S=$[d.childRetriverFn](d.childRetriverString),T=0,C=S.length;C>T;T+=1)A=S[T],(d.noClassTesting||h.classNameReg.test(A.className))&&(L=A.innerHTML,""!==L&&(" "===L?Q=X.length:"-"===L&&(J=X.length),X.push({spaceIdx:Q,dashIdx:J,elem:A}),k.push(L)));if(P=0,r=X.length,N=X[0].elem.offsetWidth,N>e)return et.text="",et.width=et.oriTextWidth=et.height=et.oriTextHeight=0,et;if(N>u&&!this._showNoEllipses&&(u=e-2*Z,u>N?V="..":(u=e-Z,u>N?V=".":(u=0,V=""))),_=X[0].elem.offsetLeft,x=X[0].elem.offsetTop,i)for(;r>P;P+=1)A=X[P].elem,H=A.offsetLeft-_+A.offsetWidth,H>u&&(R||(R=P),$.offsetWidth>e&&(M=P,P=r));else for(;r>P;P+=1)A=X[P].elem,W=A.offsetHeight+(A.offsetTop-x),H=A.offsetLeft-_+A.offsetWidth,E=null,H>u?(R||(R=P),H>e&&(z=X[P].spaceIdx,O=X[P].dashIdx,z>I?(X[z].elem.innerHTML="<br/>",I=z):O>I?(X[O].elem.innerHTML=O===P?"<br/>-":"-<br/>",I=O):A.parentNode.insertBefore(E=l.createElement("br"),A),A.offsetHeight+A.offsetTop>n?(E?E.parentNode.removeChild(E):I===O?X[O].elem.innerHTML="-":X[z].elem.innerHTML=" ",M=P,P=r):R=null)):W>n&&(M=P,P=r);if(r>M){for(et.isTruncated=!0,R=R?R:M,P=r-1;P>=R;P-=1)A=X[P].elem,A.parentNode.removeChild(A);for(;P>=0;P-=1)A=X[P].elem,h.classNameBrReg.test(A.className)?A.parentNode.removeChild(A):P=0}return et.text=$.innerHTML.replace(h.spanRemovalRegx,"$1").replace(/\&amp\;/g,"&"),et.isTruncated&&(et.text+=V,et.tooltext=f),et.height=$.offsetHeight,et.width=$.offsetWidth,et}return et.error=new Error("Body Tag Missing!"),et},i.prototype.getOriSize=function(t,e){if(!this._init)return!1;var n,i,r,o,s,a=0,h=0,l={};if(!e)return this._calCharDimWithCache(t);for(n=t.split(""),o=0,s=n.length;s>o;o++)i=n[o],r=this._calCharDimWithCache(i,!0,n.length),h=c(h,r.height),a+=r.width,l[i]=r.width;return{width:f(a),height:h,detailObj:l}},i.prototype.dispose=function(){return this._init?(this._containerManager&&this._containerManager.dispose&&this._containerManager.dispose(),delete this._container,delete this._context,delete this._cache,delete this._containerManager,delete this._containerObj,delete this.id,delete this.style,delete this.parentContainer,delete this._showNoEllipses,this):this},e["default"]=i,t.exports=e["default"]}),Jt=Z(Xt),Qt={mergeRecursive:function ue(t,e){var n;for(n in e)t[n]instanceof Object?ue(t[n],e[n]):t[n]=e[n]},serialize:function(){},isObject:function(t){return"object"==typeof t},extend2:function(){}},Yt=1,te=function(){return{label:{customTagName:"FT",customTagClassName:"custom-label",text:"",className:"label",style:{"font-size":"12px"},maxDimensions:{width:1600,height:900},valign:"middle"},margin:{left:0,right:0,top:0,bottom:0},padding:{left:0,right:0,top:0,bottom:0},interaction:{hide:!1,listeners:[{action:"click"}],tooltip:{hide:!1,text:"ABC"},className:"fusioncharts-navigator-standardTimeZone-tracker-rect"+Yt,style:{fill:"rgba(192,192,192,0)","stroke-width":"0",cursor:"pointer"}},labelBound:{hide:!0,className:"fusioncharts-navigator-standardTimeZone-label-bound"+Yt,style:{fill:"NONE","stroke-width":"1",stroke:"#000"},customLogicalSpace:Kt,defaultConfig:{pathFn:function(t,e,n,i){return["M",t,e,"L",t+n,e,"L",t+n,e+i,"L",t,e+i,"Z"]},getLogicalSpace:function(t,e,n){var i=2*n["stroke-width"];return t+=i,e+=i,{width:t,height:e}}},customPathFn:Kt}}},ee=window,ne="",ie="-",re=Math,oe=re.max,se=ee.String,ae=ee.parseFloat,he=ee.getComputedStyle;J.prototype.margin=function(t){return t&&Qt.mergeRecursive(this.config.margin,t),this},J.prototype.padding=function(t){return t&&Qt.mergeRecursive(this.config.padding,t),this},J.prototype.label=function(t,e,n){var i=this.config.label;return t&&(i.text=t),e&&Qt.mergeRecursive(i,e),n&&n.call(this),this},J.prototype.getSmartLabelInstance=function(t){return this.smartLabel||(this.smartLabel=t||new Jt((new Date).getTime())),this.smartLabel},J.prototype.getConfig=function(t){return this.config[t]},J.prototype.getParentSelection=function(t){return t&&(this.selection=t),this.selection},J.prototype.getStubSelection=function(t,e,n,i){i?i[1]&&(i=" "+i[1]):i=ne;var r,o=e+i;return this._group||(this._group=t.append("g")),r=this._group.attr("class",o),n&&n[2]&&this.recurse(this.normalizeStyle(n[2]),r,"style"),{selection:r,style:this.getSmartComputedStyle(r,o)}},J.prototype.getSmartComputedStyle=function(t,e){var n,i,r,o="W",s={"fill-opacity":0},a="string"==typeof e?e:void 0;return n=t.append("text").text(o),a?n.attr("class",a):"object"==typeof e&&(delete e["fill-opacity"],Qt.extend2(s,e)),this.recurse(s,n,"style"),i=window.getComputedStyle(n.node()),r={fontSize:i.fontSize,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontStyle:i.fontStyle},n.remove(),r},J.prototype.normalizeStyle=function(t){var e,n,i=t.replace(/\s/g,"").split(new RegExp(/([\w\-]+):([a-z\s\d]+);/,"ig")).filter(Boolean),r={};for(e=0,n=i.length;n>e;e+=1)r[i[e]]=i[++e];return r},J.prototype.recurse=function(t,e,n){var i;for(i in t)e[n].call(e,i,t[i])},J.prototype.parsedText=function(){var t,e,n,i,r,o,s,a,h,l,u,c=this.config.label,f=c.text,p=c.customTagName,g=c.customTagClassName,d=this.textArr,m=this.getParentSelection(),y=[],v=0,w=0,_=this.getSmartLabelInstance();for(d=this.textArr=[],y.push(this.getStubSelection(m,c.className,c.style)),n=f.split(new RegExp("(<"+p+")([^>]*)>|(</"+p+">)","g")),i="<"+p,o="</"+p+">",_.useEllipsesOnOverflow(1),a=0,u=n.length;u>a;a+=1)(t=n[a])!==$t&&(t===i?(v+=1,s=g+ie+w++,r=n[++a],y[v]=this.getStubSelection(y[v-1].selection,s,new RegExp("\\sstyle=([\"'])([^\\1]+)\\1","g").exec(r),new RegExp("class=[\"']([a-z\\d\\s]+)[\"']","gi").exec(r))):t===o?v-=1:t!==ne&&(e=y[v],h=n[a],_.setStyle(e.style),l=_.getOriSize(h||ne),d.push({selection:e.selection,oriText:h,text:h,oriWidth:l.width,width:l.width,oriHeight:l.height,height:l.height})));return d},J.prototype.getLogicalSpace=function(t,e){t&&this.getParentSelection(t);var n,i,r,o,s,a,h=this.config,l=this.getSmartLabelInstance(),u=h.label.maxDimensions,c=h.margin,f=c.left+c.right,p=c.top+c.bottom,g=(e&&e.width||u.width)-f,d=(e&&e.height||u.height)-p,m=h.labelBound,y=m.customLogicalSpace||m.defaultConfig.getLogicalSpace,v=this.parsedText(),w=g,_=0;for(o=0,s=v.length;s>o;o+=1)a=v[o],(a.oriWidth>g||a.oriHeight>d)&&(n=l.getSmartText(a.oriText,w,d),a.text=n.text,a.width=n.width,a.height=n.height),w-=a.width,_=oe(_,a.height);return i=_,r=g-w,m.hide?{width:r+f,height:i+p}:y(i,r,m.style)},J.prototype.tuneText=function(t,e){var n,i=+t.attr("x"),r=+t.attr("y"),o=he(t.node(),ne),s=se(e.text).split(/\n|<br\s*?\/?>/gi),a=o?ae(o.getPropertyValue("font-size")):10,h=1.2*a,l=this.config.label.valign;return l="top"===l?-.5:"bottom"===l?.5:0,t.selectAll("tspan").data(s).call(this.updateTuning,i,h,s,l).enter().append("tspan").call(this.updateTuning,i,h,s,l),n=t.node().getBBox(),t.select("tspan").attr("dy",r-(n.y+n.height/2)),(s.length-1)*h},J.prototype.updateTuning=function(t,e,n,i,r){return t.each(function(t,o){Ut(this).attr("x",e).attr("dy",o?n:n*i.length*r).text(i[o])})},J.prototype.setDrawingConfiguration=function(t,e,n,i){var r=this.measurement;return Qt.isObject(t)&&(e=t.y,n=t.width,i=t.height,t=t.x),r.x=t,r.y=e,r.width=n,r.height=i,this},J.prototype.draw=function(t,e){return e&&(e.width||e.height)&&this.getLogicalSpace(this.getParentSelection(t),{width:e.width,height:e.height}),this.drawLabelBound.apply(this,arguments).drawLabel.apply(this,arguments).drawTracker.apply(this,arguments)},J.prototype.drawLabelBound=function(){return this},J.prototype.drawLabel=function(t,e){e&&this.setDrawingConfiguration(e);var n,i,r,o,s,a,h,l,u,c=this.graphics,f=c.labelArr||(c.labelArr=[]),p=this.measurement,g=this.config.margin,d=this.parsedText();if(n=void 0===n?p.x:n,i=void 0===i?p.y:i,s=void 0===s?p.width:s,a=void 0===a?p.height:a,n+=g.left,i+=g.top,u=n,!s||!a||isFinite(n)&&isFinite(i)){for(r=0,o=d.length;o>r;r+=1)h=d[r],(l=f[r])||(f[r]=l=h.selection.append("text")),n=u,l.attr("x",n).attr("y",i),i+=this.tuneText(l,h),u+=h.width;return this}},J.prototype.drawTracker=function(){return this},J.prototype.transform=function(t){return this.getParentSelection().attr("transform",t)};var le=function(){return new J};t.fusiontext=le,Object.defineProperty(t,"__esModule",{value:!0})});